# 객체지향의 사실과 오해

## 한줄요약

**협력 관계 속 메세지를 중심으로 책임과 역할을 부여하자!**

코드의 재사용성과, 유연성을 얻을 수 있다.!

## 역할, 책임, 협력 관점에서 본 객체지향

![Untitled](https://user-images.githubusercontent.com/45115557/180632595-dea09273-afa5-4370-b199-62996d4bd0a0.png)

위 도서를 읽고 정리한 내용입니다. 

# 왜 객체지향인가

캡슐화, 추상화를 통해서 복잡한 문제를 단순하게 하고 구조적 단순함을 통해 재사용성을 높인다. 

# 역할과 책임을 수행하며 협력하는 객체들

![Untitled (1)](https://user-images.githubusercontent.com/45115557/180632613-33f50adc-a5f6-46c5-9d6a-0a62a29f62b4.png)


일상생활의 예를 들어봅시다. 

회사 21층에 올라가서 커피를 주문할때, 손님이 커피를 주문하고 캐시어가 주문을 받고 커피를 제조하라는 

메세지를 전달하면, 바리스타가 커피를 만듭니다. 

- 메시지 를 통한 요청과 응답으로 협력
- 바리스타라는 '역할'은 커피를 제조하는 '책임'을 지님

## 객체지향의 본질

- 객체는 시스템의 목적을 이루기 위해 다른 객체와 메세지로 협력한다.
- 객체는 협력 내에서 정해진 역할을 수행하며, 역할은 관련된 책임의 집합이다.
- 자율적인 객체란, 상태와 행위를 함께 지니며 스스로 자기 자신을 책임지는 객체 (how를 스스로 정할 수 있다.)

---

# 상태를 먼저 결정 vs 행동 먼저 결정

객체를 디자인할때 어떤 것을 먼저 결정해야 할까요?

> 행동을 먼저 결정하는 것을 **책임-주도설계(Responsibility-Driven Design)**
> 

### 상태를 먼저 결정할 경우 단점

1. 캡슐화가 저해된다. 상태가 객체 내부로 깔끔하게 캡슐화 되지 못하고 공용 인터페이스에 노출된다. 
2. 협력이라는 문맥에서 고립된 채 객체를 설계함으로써 , 자연스럽게 협력에 적합하지 않은 객체가 생성된다. 
3. 객체의 재사용성이 저하된다. 

---

# 캡슐화와 타입

### 런던의 지하철 노선표 1
![Untitled (2)](https://user-images.githubusercontent.com/45115557/180632633-09b53554-f7f9-4f0b-813e-9dffbfe2daba.png)


### 런던의 지하철 노션표 2

![Untitled (3)](https://user-images.githubusercontent.com/45115557/180632653-7f0ede07-5c6d-40a9-9c75-24350326bd46.png)


1번과 2번 중에 어떤것이 더 간편할까요?

1번의 지도는 런던의 지형을 고려해서 설계한 것이나, 너무 복잡해서 시민들이 어려워했다

반면 2번의 지도는 지형 및 역간의 거리는 배제하고 설계된 지도로 더 알아보기 쉽다.

### 불필요하게 많은 데이터를 감추고 필요한 정보만 보여줌(추상화)으로서, 가독성과 재사용성을 높인다.

### 추상화의 방식

![Untitled (4)](https://user-images.githubusercontent.com/45115557/180632658-a3298275-8d19-490c-9de2-30fdebc6ee45.png)


1. **사물들 간의 공통점은 취하고 차이점은 버리는 일반화**
    
    공통점: 납작 엎드릴 수 있고 걸을때마다 몸이 종이처럼 좌우로 팔락거린다.
    
2. **중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거해 단순화**
    
    지형 세부사항 제거
    

## 객체의 타입을 결정하는 것은 객체가 수행하는 행동 vs 데이터

객체의 타입을 결정하는 것은 **행동**이다!

- 어떤 객체들이 동일한 행동을 수행한다면 그 객체들은 동일한 타입으로 분류될 수 있다.
- 객체의 행동을 가장 효과적으로 수행할 수만 있다면 객체 내부의 상태를 어떤 방식으로 표현해도 무방하다. → 다형성, 인터페이스로 구현 가능

> **훌륭한 객체지향 설계는 외부에 행동만을 제공하고 데이터는 행동 뒤로 감춰야 한다. 이 원칙을 흔히 캡슐화 라고 한다.**
> 

---

# 책임

앨리스 이야기를 예시로 들어보자.

트럼프 나라에 범죄가 발생하여 재판을 집행하고자 한다. 

이때 왕, 모자장수, 토끼의 책임을 살펴보자. 

![Untitled (5)](https://user-images.githubusercontent.com/45115557/180632671-6acb914d-fb50-49c4-a8e4-6835f096f2bd.png)


### 책임의 분류

- 하는 것(doing)
    - 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
    - 다른 객체의 행동을 시작시키는 것 (왕,토끼)
    - 다른 객체의 활동을 제어하고 조절하는 것 (왕)
- 아는 것(knowing)
    - 개인적인 정보에 관해 아는 것 (모자장수)
    - 관련된 객체에 관해 아는 것 (토끼)
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것 (모자장수)
    
    객체의 책임을 이야기 할 대는 일반적으로 외부에서 접근 가능한 공용 서비스의 관점에서 이야기 한다. 
    
    책임 = 외부에 제공해 줄 수 있는 정보 + 외부에 제공해 줄 수 있는 서비스  (내부는 캡슐화)
    
    > **책임은 객체의 공용 인터페이스(public interface)를 구성한다.**
    > 
    
    # 역할
    
    모자장수가 재판이라는 협력에서 '증인석에 입장한다', '증언한다' 책임을 지는 것 → 증인
    
    왕이 '재판한다' 책임을 지고 토끼에게 '목격자를 불러오라' 하는 것 → 판사
    
     
    
    > 즉, **어떤 객체가 수행하는 책임의 집합은 객체가 협력 안에서 수행하는 역할이다.**
    > 
    
    ![Untitled (6)](https://user-images.githubusercontent.com/45115557/180632680-84c13504-7cfa-4883-907f-b761578249b0.png)

    
    ### **역할을 수행하는 객체를 유연하게 변경 할 수 있다.**
    
    판사는 왕이 될 수도, 여왕이 될 수도 있다. 
    
    증인은 모자장수가 될수도, 앨리스가 될 수도 있다. 
    
    > **역할 개념을 이용하면 유사한 협력을 추상화해서 단순성, 유연성, 재사용성을 높일 수 있다.**
    > 
    
    ---
    
    # 자율적인 책임
    
    "증언하다"라는 책임을 수행하는 두가지 방식이 있다. 
    
    어느 것이 더 자율적이여 보이는가?
    
    1. 
    
    ![Untitled (7)](https://user-images.githubusercontent.com/45115557/180632690-39ca0588-efc0-4c5a-8ae5-0eed13b7c84e.png)

    
    2.
    
    ![Untitled (8)](https://user-images.githubusercontent.com/45115557/180632702-b5f5d372-69b8-4bbd-bdef-291235bb99be.png)

    
    첫번째와 두번째 모두 증언할 책임을 지고 있으나, 첫번째는 "떠오르는 기억을 순서대로 재구성" 하라는 왕의 요청에 의한 구체적인 방식으로 진행되고 있다. 
    
    이와 같이 public interface로 제공되는 메세지가 너무 세분화 되어 있으면, 객체의 자율성을 보장할 수 없다. 
    
    증언하는 객체는 "떠오르는 기억을 시간 순서대로 재구성" 하던, 메모장에 써놓은 것을 읽던 **스스로 어떤 방식으로 책임을 수행할 것인지 (how) 결정할 수 있어야 한다.** 
    
    > **추상적이고 포괄적인 책임을 협력을 좀 더 다양한 환경에서 재사용 할 수 있도록 한다.  (다형성)**
    > 
    
    # 너무 추상적인 책임
    
    구체적인 책임이 자율성을 막는다면, 너무 추상적인 책임은 협력의 의도를 명확하게 표현하지 못한다. 
    
    ![Untitled (9)](https://user-images.githubusercontent.com/45115557/180632710-662553b6-f759-4d96-857d-9dc11dc57218.png)

    
    어떤 역할을 수행해야 할지 명확하지 않으므로, 설계의 모호함을 불러 일으킨다. 
    
    - 책임은 객체의 자율성을 보장할 수 있을정도로 충분히 추상적인 동시에 협력의 의도를 또렷하게 표현할 수 있을 정도로 구체적이여야 한다.
    

---

# 객체 인터페이스

> **메시지가 인터페이스를 결정한다.**
> 

### 인터페이스의 장점

1. 인터페이스의 사용법을 익히면, 내부 구조나 동작 방식을 몰라도 쉽게 대상을 조작하거나 의사를 전달 할 수 있다. 
2. 인터페이스 자체는 변경하지 않고 내부 구성이나 작동 방식만 유연하게 변경할 수 있다. 
3. 대상이 변경되더라도 동일한 인터페이스를 제공하면 쉽게 상호작용 할 수 있다. 

### 공용 인터페이스와 구현의 분리

- 외부와 협력하며 소통하는 메세지는 공용 인터페이스
- 메세지를 수행하는 상세 방식은 캡슐화하여 내부구현 (변경될만한 부분을 객체의 내부에 꽁꽁 숨긴다!)
